<div class="evaluator-detail-container">
  <!-- Loading state -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
  </div>

  <!-- Error state -->
  <div *ngIf="error && !loading" class="error-container">
    <mat-icon class="error-icon">error_outline</mat-icon>
    <h2>Failed to load evaluator details</h2>
    <p>There was an error loading the evaluator information.</p>
    <button mat-raised-button color="primary" (click)="loadEvaluator()">Retry</button>
    <button mat-button (click)="goBack()">Go Back</button>
  </div>

  <!-- Content when loaded -->
  <div *ngIf="!loading && !error && evaluator">
    <!-- Header with actions -->
    <mat-card class="header-card">
      <mat-card-header>
        <div mat-card-avatar>
          <mat-icon [color]="getTypeColor(evaluator.type)">person</mat-icon>
        </div>
        <mat-card-title class="flex items-center gap-2">
          {{ evaluator.evaluator.name }}
        </mat-card-title>
        <mat-card-subtitle>{{ getTypeLabel(evaluator.type) }} Evaluator</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="profile-section">
          <div class="profile-info">
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">Email</span>
                <span class="info-value">{{ evaluator.evaluator.email }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Academic Degree Level</span>
                <span class="info-value">{{ evaluator.evaluator.academicDegreeLevel }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Created</span>
                <span class="info-value">{{ evaluator.createdAt | date:'mediumDate' }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Last Updated</span>
                <span class="info-value">{{ evaluator.updatedAt | date:'mediumDate' }}</span>
              </div>
            </div>

            <div class="mt-4">
              <span class="info-label">Expertise</span>
              <div class="expertise-chips">
                <mat-chip-set>
                  <mat-chip *ngFor="let expertise of evaluator.expertise">{{ expertise }}</mat-chip>
                </mat-chip-set>
              </div>
            </div>
          </div>

          <div class="action-buttons">
            <button mat-button (click)="goBack()">
              <mat-icon>arrow_back</mat-icon>
              Back to Evaluators
            </button>
            <button mat-raised-button color="primary" (click)="editEvaluator()">
              <mat-icon>edit</mat-icon>
              Edit Evaluator
            </button>

            <button mat-stroked-button color="warn" (click)="deleteEvaluator()">
              <mat-icon>delete</mat-icon>
              Delete
            </button>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Tabs for different sections -->
    <mat-tab-group>
      <!-- Performance Tab -->
      <mat-tab label="Performance">
        <div class="tab-content">
          <h3 class="section-title">
            <mat-icon>insights</mat-icon>
            Performance Metrics
          </h3>

          <h3 class="section-title mt-6">
            <mat-icon>pie_chart</mat-icon>
            Expertise Distribution
          </h3>

          <div class="expertise-chart-container">
            <span class="font-medium">{{ evaluator.expertise }}</span>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
